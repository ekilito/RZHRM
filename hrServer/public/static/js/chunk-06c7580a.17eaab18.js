(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06c7580a"],{"03c9":function(e,t,a){},"1f6a":function(e,t,a){},6017:function(e,t,a){"use strict";a("b0d7")},"71c9":function(e,t,a){"use strict";a.r(t);a("14d9"),a("b0c0");var n=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"dashboard-container"},[t("div",{staticClass:"app-container"},[t("page-tools",{attrs:{"show-before":!0},scopedSlots:e._u([{key:"before",fn:function(){return[e._v("有 "+e._s(e.attendInfo.tobeTaskCount)+" 条考勤审批尚未处理")]},proxy:!0}])},[[t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.$router.push("/import?type=attendance")}}},[e._v("导入")]),t("el-button",{attrs:{size:"mini",type:"warning"}},[e._v("提醒")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleSet}},[e._v("设置")]),t("el-button",{attrs:{size:"mini",type:"default"},on:{click:function(t){return e.$router.push("/attendances/archiving/")}}},[e._v("历史归档")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.$router.push({path:"/attendances/report/"+e.yearMonth})}}},[e._v(e._s(e.yearMonth)+"报表")])]],2),t("el-card",{staticClass:"hr-block"},[t("el-form",{ref:"formData",staticClass:"formInfo",attrs:{model:e.formData,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"部门:"}},[t("el-checkbox-group",{model:{value:e.formData.deptID,callback:function(t){e.$set(e.formData,"deptID",t)},expression:"formData.deptID"}},e._l(e.departments,(function(a){return t("el-checkbox",{key:a.id,attrs:{label:a.name}},[e._v(" "+e._s(a.name)+" ")])})),1)],1),t("el-form-item",{attrs:{label:"考勤状态："}},[t("el-radio-group",{model:{value:e.formData.stateID,callback:function(t){e.$set(e.formData,"stateID",t)},expression:"formData.stateID"}},e._l(e.stateData.holidayType,(function(a){return t("el-radio",{key:a.id,attrs:{label:a.value,value:a.value}},[e._v(" "+e._s(a.value)+" ")])})),1)],1)],1)],1),t("el-card",{staticClass:"hr-block"},[t("div",{staticStyle:{width:"100%",position:"relative","overflow-x":"auto","overflow-y":"hidden"}},[t("div",{staticStyle:{width:"3000px"}},[t("table",{staticClass:"tableInfo",attrs:{border:"0",align:"center",cellpadding:"0",cellspacing:"0"}},[t("tr",[t("th",{attrs:{width:"50"}},[e._v("序号")]),t("th",{attrs:{width:"100"}},[e._v("姓名")]),t("th",{attrs:{width:"100"}},[e._v("工号")]),t("th",{attrs:{width:"200"}},[e._v("部门")]),t("th",{attrs:{width:"100"}},[e._v("手机")]),e._l(e.monthOfReport,(function(a,n){return t("th",{key:n,attrs:{width:"110"}},[e._v(e._s(e.attendInfo.month)+"/"+e._s(n+1))])}))],2),e._l(e.list,(function(a,n){return t("tr",{key:a.id},[t("td",{attrs:{width:"50"}},[e._v(e._s(n))]),t("td",{attrs:{width:"100"}},[e._v(e._s(a.username))]),t("td",{attrs:{width:"100"}},[e._v(e._s(a.workNumber))]),t("td",{attrs:{width:"200"}},[e._v(e._s(a.departmentName))]),t("td",{attrs:{width:"100"}},[e._v(e._s(a.mobile))]),e._l(a.attendanceRecord,(function(n,i){return t("td",{key:i,attrs:{width:"110"},on:{click:function(t){return e.showChangeDialog(a,i,n)}}},[1===n.adtStatu?t("span",[e._v("√")]):e._e(),2===n.adtStatu?t("span",[e._v("旷工")]):e._e(),3===n.adtStatu?t("span",[e._v("迟到")]):e._e(),4===n.adtStatu?t("span",[e._v("早退")]):e._e(),5===n.adtStatu?t("span",[e._v("外出")]):e._e(),6===n.adtStatu?t("span",[e._v("出差")]):e._e(),7===n.adtStatu?t("span",[e._v("年假")]):e._e(),8===n.adtStatu?t("span",[e._v("事假")]):e._e(),9===n.adtStatu?t("span",[e._v("病假")]):e._e(),10===n.adtStatu?t("span",[e._v("婚假")]):e._e(),11===n.adtStatu?t("span",[e._v("丧假")]):e._e(),12===n.adtStatu?t("span",[e._v("产假")]):e._e(),13===n.adtStatu?t("span",[e._v("奖励产假")]):e._e(),14===n.adtStatu?t("span",[e._v("陪产假")]):e._e(),15===n.adtStatu?t("span",[e._v("探亲假")]):e._e(),16===n.adtStatu?t("span",[e._v("工伤假")]):e._e(),17===n.adtStatu?t("span",[e._v("调休")]):e._e(),18===n.adtStatu?t("span",[e._v("产检假")]):e._e(),19===n.adtStatu?t("span",[e._v("流产假2")]):e._e(),20===n.adtStatu?t("span",[e._v("长期病假")]):e._e(),21===n.adtStatu?t("span",[e._v("测试架")]):e._e(),22===n.adtStatu?t("span",[e._v("补签")]):e._e()])}))],2)}))],2)])]),t("el-dialog",{attrs:{visible:e.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[t("span",{staticStyle:{color:"#fff"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.attendInfo.name)+" "+e._s(e.attendInfo.month)+"/"+e._s(e.attendInfo.getDate)+"（实际工作日考勤方案）")]),t("div",{staticClass:"attenInfo"},[t("p",{staticClass:"colRed"},[e._v("注：统计考勤时，异常状态优先正常状态")]),t("p",{staticClass:"check"},[t("el-radio-group",{model:{value:e.modifyData.adtStatu,callback:function(t){e.$set(e.modifyData,"adtStatu",t)},expression:"modifyData.adtStatu"}},e._l(e.stateData.vacationtype,(function(a){return t("el-radio",{key:a.id,attrs:{label:a.id,value:a.name}},[e._v(e._s(a.name))])})),1)],1)]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.btnOK}},[e._v("确定")]),t("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取消")])],1)]),t("el-row",{staticStyle:{height:"60px"},attrs:{type:"flex",align:"middle",justify:"center"}},[t("el-pagination",{attrs:{"page-size":e.page.pagesize,"current-page":e.page.page,layout:"prev, pager, next",total:e.page.total},on:{"current-change":e.pageChange}})],1)],1)],1),t("el-card",[t("el-dialog",{attrs:{title:"提醒",visible:e.tipsDialogVisible,width:"280px",center:""},on:{"update:visible":function(t){e.tipsDialogVisible=t}}},[t("div",{staticClass:"attenInfo"},[t("p",[e._v("系统将通过邮件与短信的形式，对全体员工中存在旷工的考勤进行提醒，该提醒每月仅可发送 1 次。")])]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleSub}},[e._v("我知道了")]),t("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取消")])],1)]),t("attendance-set",{ref:"set",on:{handleCloseModal:e.handleCloseModal}})],1)],1)},i=[],s=a("5530"),r=a("c7eb"),o=a("1da1"),l=(a("99af"),a("b775"));function c(e){return Object(l["a"])({url:"/attendances",params:e})}function d(e){return Object(l["a"])({url:"/cfg/leave",method:"put",data:e})}function u(e){return Object(l["a"])({url:"/cfg/leave/list",method:"post",data:e})}function p(e){return Object(l["a"])({url:"/cfg/deduction",method:"put",data:e})}function m(e){return Object(l["a"])({url:"/cfg/ded/list",method:"post",data:e})}function f(e){return Object(l["a"])({url:"/cfg/extDuty",method:"put",data:e})}function v(e){return Object(l["a"])({url:"/cfg/extDuty/item",method:"post",data:e})}function b(e){return Object(l["a"])({url:"/cfg/atte",method:"put",data:e})}function h(e){return Object(l["a"])({url:"/cfg/atte/item",method:"post",data:e})}var w=function(){var e=this,t=e._self._c;return t("div",{staticClass:"add-form"},[t("el-dialog",{attrs:{title:"设置",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-tabs",{staticStyle:{"margin-left":"20px"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"出勤设置",name:"first"}},[t("el-form",{ref:"dataForm",staticClass:"titmInfo",staticStyle:{width:"700px"},attrs:{rules:e.rules,model:e.formBase,"label-position":"right","label-width":"100px"}},[t("el-form-item",{attrs:{label:"部门：",prop:"departmentId"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.handleChange},model:{value:e.formBase.departmentId,callback:function(t){e.$set(e.formBase,"departmentId",t)},expression:"formBase.departmentId"}},e._l(e.departmentData,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"出勤时间：",prop:"morningStartTime"}},[t("el-time-select",{staticClass:"timePicker",attrs:{"picker-options":{start:"00:00",step:"00:05",end:"23:59"},placeholder:e.formBase.morningStartTime},model:{value:e.formBase.morningStartTime,callback:function(t){e.$set(e.formBase,"morningStartTime",t)},expression:"formBase.morningStartTime"}}),e._v("- "),t("el-time-select",{staticClass:"timePicker",attrs:{"picker-options":{start:"08:30",step:"00:15",end:"18:30"},placeholder:e.formBase.morningEndTime},model:{value:e.formBase.morningEndTime,callback:function(t){e.$set(e.formBase,"morningEndTime",t)},expression:"formBase.morningEndTime"}}),t("el-time-select",{staticClass:"timePicker",attrs:{"picker-options":{start:"08:30",step:"00:15",end:"18:30"},placeholder:e.formBase.afternoonStartTime},model:{value:e.formBase.afternoonStartTime,callback:function(t){e.$set(e.formBase,"afternoonStartTime",t)},expression:"formBase.afternoonStartTime"}}),e._v("- "),t("el-time-select",{staticClass:"timePicker",attrs:{"picker-options":{start:"08:30",step:"00:15",end:"18:30"},placeholder:e.formBase.afternoonEndTime},model:{value:e.formBase.afternoonEndTime,callback:function(t){e.$set(e.formBase,"afternoonEndTime",t)},expression:"formBase.afternoonEndTime"}})],1)],1),t("div",{staticClass:"el-dialog__footer dialog-footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleAttendance}},[e._v("保存更新")]),t("el-button",{on:{click:e.handleClose}},[e._v("取消")])],1)],1),t("el-tab-pane",{attrs:{label:"请假设置",name:"second"}},[t("el-form",{ref:"leaveForm",staticClass:"titmInfo",attrs:{rules:e.rules,model:e.leaveBase,"label-position":"right","label-width":"80px"}},[t("el-form-item",{attrs:{label:"部门：",prop:"departmentId"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.handleChangeLeave},model:{value:e.leaveBase.departmentId,callback:function(t){e.$set(e.leaveBase,"departmentId",t)},expression:"leaveBase.departmentId"}},e._l(e.departmentData,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),t("p",[e._v("假期类型")]),t("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.stateData.type}},[t("el-table-column",{attrs:{prop:"name",label:"类型",width:"200"}}),t("el-table-column",{attrs:{label:"是否可用"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:a.row.isEnable,callback:function(t){e.$set(a.row,"isEnable",t)},expression:"scope.row.isEnable"}})]}}])})],1),t("div",{staticClass:"el-dialog__footer dialog-footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleLeave}},[e._v("保存更新")]),t("el-button",{on:{click:e.handleClose}},[e._v("取消")])],1),t("el-alert",{attrs:{type:"warning","show-icon":"",closable:!1,title:""}},[[t("div",{staticClass:"tipInfo"},[t("p",[e._v("事假 请假单位为0.5天 只能提交工作日内的请假单")]),t("p",[e._v("当请假开关关闭后，员工则不可在员工端提交请假申请")])])]],2)],1),t("el-tab-pane",{attrs:{label:"扣款设置",name:"third"}},[t("el-form",{ref:"deductionsForm",staticClass:"titmInfo",attrs:{rules:e.rules,model:e.deductionsBase,"label-position":"right","label-width":"80px"}},[t("el-form-item",{attrs:{label:"部门：",prop:"departmentId"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.handleChangeDeductions},model:{value:e.deductionsBase.departmentId,callback:function(t){e.$set(e.deductionsBase,"departmentId",t)},expression:"deductionsBase.departmentId"}},e._l(e.departmentData,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),t("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.stateData.departmentType}},[t("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(" "+e._s(a.row.name)+" "),t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(t){return e.handleStatus(t,a.row)}},model:{value:a.row.isEnable,callback:function(t){e.$set(a.row,"isEnable",t)},expression:"scope.row.isEnable"}})],1),"51000"===a.row.dedTypeCode?t("div",{staticClass:"attentInfo"},[t("p",[e._v(" 迟到≤ "),t("el-input",{staticClass:"inputInfo",attrs:{value:"30"},nativeOn:{input:function(t){return e.handleInput(t)}},model:{value:a.row.periodUpperLimit,callback:function(t){e.$set(a.row,"periodUpperLimit",t)},expression:"scope.row.periodUpperLimit"}}),e._v("分钟 ")],1),t("div",{staticClass:"deductionInfo"},[t("p",[e._v(" 迟到≤ "),t("el-input",{staticClass:"inputInfo",nativeOn:{input:function(t){return e.handleInput(t)}},model:{value:a.row.timesUpperLimit,callback:function(t){e.$set(a.row,"timesUpperLimit",t)},expression:"scope.row.timesUpperLimit"}}),e._v("次，每次扣款 "),t("el-input",{staticClass:"inputInfo",nativeOn:{input:function(t){return e.handleInput(t)}},model:{value:a.row.dedAmonutUpperLimit,callback:function(t){e.$set(a.row,"dedAmonutUpperLimit",t)},expression:"scope.row.dedAmonutUpperLimit"}}),e._v("元 ")],1),t("p",[e._v(" 迟到> "),t("el-input",{staticClass:"inputInfo",attrs:{disabled:""},nativeOn:{input:function(t){return e.handleInput(t)}},model:{value:a.row.timesLowerLimit,callback:function(t){e.$set(a.row,"timesLowerLimit",t)},expression:"scope.row.timesLowerLimit"}}),e._v("次，每次扣款 "),t("el-input",{staticClass:"inputInfo",nativeOn:{input:function(t){return e.handleInput(t)}},model:{value:a.row.dedAmonutLowerLimit,callback:function(t){e.$set(a.row,"dedAmonutLowerLimit",t)},expression:"scope.row.dedAmonutLowerLimit"}}),e._v("元 ")],1)]),t("p",[e._v(" 迟到> "),t("el-input",{staticClass:"inputInfo",attrs:{disabled:""},model:{value:a.row.periodLowerLimit,callback:function(t){e.$set(a.row,"periodLowerLimit",t)},expression:"scope.row.periodLowerLimit"}}),e._v("分钟 ")],1),t("div",{staticClass:"deductionInfo"},[t("p",[e._v(" 迟到> "),t("el-input",{staticClass:"inputInfo",attrs:{disabled:""},model:{value:a.row.absenceTimesUpperLimt,callback:function(t){e.$set(a.row,"absenceTimesUpperLimt",t)},expression:"scope.row.absenceTimesUpperLimt"}}),e._v("次，每次矿工 "),t("el-input",{staticClass:"inputInfo",nativeOn:{input:function(t){return e.handleInputPoint(t)}},model:{value:a.row.absenceDays,callback:function(t){e.$set(a.row,"absenceDays",t)},expression:"scope.row.absenceDays"}}),e._v("天 ")],1)])]):e._e(),"52000"===a.row.dedTypeCode?t("div",{staticClass:"attentInfo"},[t("p",[e._v(" 早退≤ "),t("el-input",{staticClass:"inputInfo",attrs:{value:"30"},nativeOn:{input:function(t){return e.handleInput(t)}},model:{value:a.row.periodUpperLimit,callback:function(t){e.$set(a.row,"periodUpperLimit",t)},expression:"scope.row.periodUpperLimit"}}),e._v("分钟 ")],1),t("div",{staticClass:"deductionInfo"},[t("p",[e._v(" 早退≤ "),t("el-input",{staticClass:"inputInfo",nativeOn:{input:function(t){return e.handleInput(t)}},model:{value:a.row.timesUpperLimit,callback:function(t){e.$set(a.row,"timesUpperLimit",t)},expression:"scope.row.timesUpperLimit"}}),e._v("次，每次扣款 "),t("el-input",{staticClass:"inputInfo",nativeOn:{input:function(t){return e.handleInput(t)}},model:{value:a.row.dedAmonutUpperLimit,callback:function(t){e.$set(a.row,"dedAmonutUpperLimit",t)},expression:"scope.row.dedAmonutUpperLimit"}}),e._v("元 ")],1),t("p",[e._v(" 早退> "),t("el-input",{staticClass:"inputInfo",attrs:{disabled:""},model:{value:a.row.timesLowerLimit,callback:function(t){e.$set(a.row,"timesLowerLimit",t)},expression:"scope.row.timesLowerLimit"}}),e._v("次，每次扣款 "),t("el-input",{staticClass:"inputInfo",nativeOn:{input:function(t){return e.handleInput(t)}},model:{value:a.row.dedAmonutLowerLimit,callback:function(t){e.$set(a.row,"dedAmonutLowerLimit",t)},expression:"scope.row.dedAmonutLowerLimit"}}),e._v("元 ")],1)]),t("p",[e._v(" 早退> "),t("el-input",{staticClass:"inputInfo",attrs:{disabled:""},model:{value:a.row.periodLowerLimit,callback:function(t){e.$set(a.row,"periodLowerLimit",t)},expression:"scope.row.periodLowerLimit"}}),e._v("分钟 ")],1),t("div",{staticStyle:{"padding-left":"120px"}},[t("p",[e._v(" 早退> "),t("el-input",{staticClass:"inputInfo",attrs:{disabled:""},model:{value:a.row.absenceTimesUpperLimt,callback:function(t){e.$set(a.row,"absenceTimesUpperLimt",t)},expression:"scope.row.absenceTimesUpperLimt"}}),e._v("次，每次矿工 "),t("el-input",{staticClass:"inputInfo",nativeOn:{input:function(t){return e.handleInputPoint(t)}},model:{value:a.row.absenceDays,callback:function(t){e.$set(a.row,"absenceDays",t)},expression:"scope.row.absenceDays"}}),e._v("天 ")],1)])]):e._e(),"53000"===a.row.dedTypeCode?t("div",{staticClass:"attentInfo"},[t("p",[e._v(" 矿工按 "),t("el-input",{staticClass:"inputInfo",nativeOn:{input:function(t){return e.handleInput(t)}},model:{value:a.row.fineSalaryMultiples,callback:function(t){e.$set(a.row,"fineSalaryMultiples",t)},expression:"scope.row.fineSalaryMultiples"}}),e._v("倍工资处罚 ")],1)]):e._e()]}}])})],1),t("div",{staticClass:"el-dialog__footer dialog-footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleDeductions}},[e._v("保存更新")]),t("el-button",{on:{click:e.handleClose}},[e._v("取消")])],1)],1),t("el-tab-pane",{attrs:{label:"加班设置",name:"fourth"}},[t("el-form",{ref:"overtimeForm",attrs:{model:e.overtimeBase,rules:e.overtimeRule,"label-width":"110px"}},[t("el-form-item",{attrs:{label:"部门：",prop:"departmentId"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.handleChangeovertime},model:{value:e.overtimeBase.departmentId,callback:function(t){e.$set(e.overtimeBase,"departmentId",t)},expression:"overtimeBase.departmentId"}},e._l(e.departmentData,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"加班规则："}},e._l(e.overtimeBase.rules,(function(a){return t("div",{key:a.id,staticClass:"ruleInfo"},[t("el-row",[t("el-col",{attrs:{span:8}},[t("div",{staticClass:"grid-content bg-purple"},[t("el-switch",{model:{value:a.isEnable,callback:function(t){e.$set(a,"isEnable",t)},expression:"item.isEnable"}}),e._v("   "+e._s(a.rule)+" ")],1)]),t("el-col",{attrs:{span:16}},[t("div",{staticClass:"grid-content bg-purple-light"},[t("span",{staticClass:"pad"},[t("el-checkbox",{model:{value:a.isTimeOff,callback:function(t){e.$set(a,"isTimeOff",t)},expression:"item.isTimeOff"}},[e._v("调休假")])],1),[t("el-time-select",{staticStyle:{width:"100px"},attrs:{"picker-options":{start:"01:00",step:"00:15",end:"23:59"},disabled:!1===a.isTimeOff},model:{value:a.ruleStartTime,callback:function(t){e.$set(a,"ruleStartTime",t)},expression:"item.ruleStartTime"}}),t("el-time-select",{staticStyle:{width:"100px"},attrs:{"picker-options":{start:"01:00",step:"00:15",end:"23:59",minTime:a.startTime},disabled:!1===a.isTimeOff},model:{value:a.ruleEndTime,callback:function(t){e.$set(a,"ruleEndTime",t)},expression:"item.ruleEndTime"}})]],2)])],1)],1)})),0),t("el-form-item",{attrs:{label:"打卡验证：",prop:"isClock"}},[t("el-switch",{model:{value:e.overtimeBase.isClock,callback:function(t){e.$set(e.overtimeBase,"isClock",t)},expression:"overtimeBase.isClock"}}),e._v("  加班需要有打卡记录 ")],1),t("el-form-item",{attrs:{label:"开启补偿：",prop:"isCompensationint"}},[t("el-switch",{model:{value:e.overtimeBase.isCompensationint,callback:function(t){e.$set(e.overtimeBase,"isCompensationint",t)},expression:"overtimeBase.isCompensationint"}})],1),t("el-form-item",{attrs:{label:"调休假设置：",prop:"latestEffectDate"}},[t("div",{staticClass:"ruleInfo"},[e._v(" 最晚有效期： 次年 "),t("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.overtimeBase.latestEffectDate,callback:function(t){e.$set(e.overtimeBase,"latestEffectDate",t)},expression:"overtimeBase.latestEffectDate"}})],1)]),t("el-form-item",{attrs:{label:"",prop:"unit"}},[t("div",{staticClass:"ruleInfo"},[t("p",[e._v(" 请假最小单位 "),t("el-input",{staticStyle:{width:"50px"},model:{value:e.overtimeBase.unit,callback:function(t){e.$set(e.overtimeBase,"unit",t)},expression:"overtimeBase.unit"}}),e._v("天 ")],1)])])],1),t("div",{staticClass:"el-dialog__footer dialog-footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleOvertime}},[e._v("保存更新")]),t("el-button",{on:{click:e.handleClose}},[e._v("取消")])],1)],1)],1)],1)],1)},g=[],_=(a("d3b7"),a("159b"),a("ef75")),y=a("0e8f"),C=a("ed08"),k={name:"Add",props:[],data:function(){return{dialogFormVisible:!1,isShowSelect:!1,formOfEmployment:"",activeName:"first",formBase:{morningStartTime:"",morningEndTime:"",afternoonStartTime:"",afternoonEndTime:"",departmentId:""},leaveBase:{departmentId:""},deductionsBase:{departmentId:""},overtimeBase:{departmentId:"",isClock:!1,isCompensationint:!1,latestEffectDate:"",unit:"",rules:[]},departmentData:[],stateData:[],tylelist:[],deductionList:[],oldNum:"",rules:{departmentId:[{required:!0,message:"请选择部门",trigger:"change"}],morningStartTime:[{required:!0,message:"请选择时间",trigger:"change"}]},overtimeRule:{unit:[{required:!0,message:"调休单位不能为空(",trigger:"blur"}],departmentId:[{required:!0,message:"请选择部门",trigger:"change"}],isClock:[{required:!0,message:"请选择打卡验证",trigger:"change"}],isCompensationint:[{required:!0,message:"请选择补偿",trigger:"change"}],latestEffectDate:[{required:!0,message:"请选择时间",trigger:"change"}]}}},computed:{inpNum:function(){return this.oldNum}},created:function(){this.getDepartment(),this.stateData=[]},methods:{getDepartment:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(y["c"])();case 2:e.departmentData=t.sent,e.formBase.departmentId=e.leaveBase.departmentId=e.deductionsBase.departmentId=e.overtimeBase.departmentId=e.departmentData[0].id,e.handleChange(e.leaveBase.departmentId);case 5:case"end":return t.stop()}}),t)})))()},dialogFormV:function(){this.dialogFormVisible=!0},dialogFormH:function(){this.dialogFormVisible=!1},clearFormDate:function(){this.formBase={}},handleClose:function(){this.dialogFormH(),this.clearFormDate()},createData:function(){var e=this;this.formBase.formOfEmployment=this.formOfEmployment,this.$refs.dataForm.validate(function(){var t=Object(o["a"])(Object(r["a"])().mark((function t(a){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=7;break}return t.next=3,Object(_["a"])(e.formBase);case 3:e.$emit("clearFormDate",e.formBase),e.formBase={},e.$emit("doQuery",e.requestParameters),e.dialogFormVisible=!1;case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleChange:function(e){var t=this;return Object(o["a"])(Object(r["a"])().mark((function a(){return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,h({departmentId:e});case 2:t.formBase=a.sent;case 3:case"end":return a.stop()}}),a)})))()},handleChangeLeave:function(e){var t=this;return Object(o["a"])(Object(r["a"])().mark((function a(){var n;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.leaveBase.departmentId=e,t.stateData.type.forEach((function(t){t.isEnable=!1,t.departmentId=e})),a.next=4,u({departmentId:e});case 4:n=a.sent,n.forEach((function(e){0===e.isEnable?e.isEnable=!0:e.isEnable=!1,t.stateData.type.forEach((function(t){t.leaveType===e.leaveType&&(t.isEnable=e.isEnable)}))}));case 6:case"end":return a.stop()}}),a)})))()},handleChangeDeductions:function(e){var t=this;return Object(o["a"])(Object(r["a"])().mark((function a(){var n;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.deductionsBase.departmentId=e,t.stateData.departmentType.forEach((function(t){t.departmentId=e,t.isEnable=!1})),a.next=4,m({departmentId:e}).then((function(e){}));case 4:n=a.sent,n.forEach((function(e){0===e.isEnable?e.isEnable=!0:e.isEnable=!1,t.stateData.departmentType.forEach((function(t){t.dedTypeCode===e.dedTypeCode&&(t.isEnable=e.isEnable)}))}));case 6:case"end":return a.stop()}}),a)})))()},handleChangeovertime:function(e){var t=this;return Object(o["a"])(Object(r["a"])().mark((function a(){var n;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.overtimeBase.departmentId=e,t.overtimeBase.rules.forEach((function(t){t.departmentId=e,t.isEnable=t.isTimeOff=!1,t.ruleEndTime=t.ruleStartTime=""})),t.overtimeBase.latestEffectDate="",t.overtimeBase.unit="",t.overtimeBase.isClock=t.overtimeBase.isCompensationint=!1,a.next=7,v({departmentId:e});case 7:n=a.sent,null===n.dayOffConfigs&&null===n.extraDutyConfig||(t.overtimeBase.departmentId=n.dayOffConfigs.departmentId,t.overtimeBase.latestEffectDate=n.dayOffConfigs.latestEffectDate,t.overtimeBase.unit=n.dayOffConfigs.unit,t.overtimeBase.isClock=n.extraDutyConfig.isClock,t.overtimeBase.isCompensationint=n.extraDutyConfig.isCompensationint),0===t.overtimeBase.isClock?t.overtimeBase.isClock=!0:t.overtimeBase.isClock=!1,0===t.overtimeBase.isCompensationint?t.overtimeBase.isClock=!0:t.overtimeBase.isCompensationint=!1,n.extraDutyRuleList.length>0&&(n.extraDutyRuleList.forEach((function(e){0===e.isEnable?e.isEnable=!0:e.isEnable=!1,0===e.isTimeOff?e.isTimeOff=!0:e.isTimeOff=!1})),t.overtimeBase.rules=n.extraDutyRuleList);case 12:case"end":return a.stop()}}),a)})))()},handleAttendance:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.dataForm.validate(function(){var t=Object(o["a"])(Object(r["a"])().mark((function t(a){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=5;break}return t.next=3,b(e.formBase);case 3:e.$emit("dataSearch"),e.handleClose();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},handleLeave:function(){var e=this;this.$refs.leaveForm.validate(function(){var t=Object(o["a"])(Object(r["a"])().mark((function t(a){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=7;break}return e.tylelist=e.stateData.type,e.tylelist.forEach((function(e){e.isEnable?e.isEnable="0":e.isEnable="1"})),t.next=5,d(e.tylelist);case 5:e.$emit("dataSearch"),e.handleClose();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleDeductions:function(){var e=this;this.$refs.deductionsForm.validate(function(){var t=Object(o["a"])(Object(r["a"])().mark((function t(a){var n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=7;break}return n=e.stateData.departmentType,n.forEach((function(e){e.isEnable?e.isEnable="0":e.isEnable="1"})),t.next=5,p(n);case 5:e.$emit("dataSearch"),e.handleClose();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleOvertime:function(){var e=this;this.$refs.overtimeForm.validate(function(){var t=Object(o["a"])(Object(r["a"])().mark((function t(a){var n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=10;break}return n=e.overtimeBase,n.latestEffectDate=C["a"](n.latestEffectDate),!0===n.isClock?n.isClock="0":n.isClock="1",!0===n.isCompensationint?n.isCompensationint="0":n.isCompensationint="1",n.rules.forEach((function(e){!0===e.isEnable?e.isEnable="0":e.isEnable="1",!0===e.isTimeOff?e.isTimeOff="0":e.isTimeOff="1"})),t.next=8,f(n);case 8:e.$emit("dataSearch"),e.handleClose();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleClick:function(e,t){"0"===e.index&&""!==this.formBase.departmentId&&this.handleChange(this.formBase.departmentId),"1"===e.index?""!==this.leaveBase.departmentId&&this.handleChangeLeave(this.leaveBase.departmentId):"2"===e.index?""!==this.deductionsBase.departmentId&&this.handleChangeDeductions(this.deductionsBase.departmentId):""!==this.overtimeBase.departmentId&&this.handleChangeovertime(this.overtimeBase.departmentId)},typeTip:function(e){this.$message.error(e)},handleInput:function(e){},handleInputPoint:function(e){},handleStatus:function(e,t){if(t.departmentId=this.deductionsBase.departmentId,""===this.deductionsBase.departmentId)return this.$message.error("请选择部门"),!1}}},I=k,x=(a("6017"),a("edfd"),a("2877")),D=Object(x["a"])(I,w,g,!1,null,"73aedf0d",null),T=D.exports,E=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"page-tools"},[t("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[t("el-col",[e.showBefore?t("div",{staticClass:"before"},[t("i",{staticClass:"el-icon-info"}),e._t("before")],2):e._e()]),t("el-col",[t("el-row",{attrs:{type:"flex",justify:"end"}},[e._t("after")],2)],1)],1)],1)},L=[],O={props:{showBefore:{type:Boolean,default:!1}}},B=O,S=(a("b247"),Object(x["a"])(B,E,L,!1,null,null,null)),j=S.exports,$={name:"Attendances",components:{AttendanceSet:T,pageTools:j},data:function(){return{list:[],selectData:[],stateData:{holidayType:[{id:"1",value:"正常",isEnable:!1},{id:"2",value:"旷工",isEnable:!1},{id:"3",value:"事假",isEnable:!1},{id:"4",value:"调休",isEnable:!1},{id:"5",value:"迟到",isEnable:!1},{id:"6",value:"早退",isEnable:!1}],vacationtype:[{id:"1",name:"正常"},{id:"2",name:"旷工"},{id:"3",name:"迟到"},{id:"4",name:"早退"},{id:"5",name:"外出"},{id:"6",name:"出差"},{id:"7",name:"年假"},{id:"8",name:"事假"},{id:"9",name:"病假"},{id:"10",name:"婚假"},{id:"11",name:"丧假"},{id:"12",name:"产假"},{id:"13",name:"奖励产假"},{id:"14",name:"陪产假"},{id:"15",name:"探亲假"},{id:"16",name:"工伤假"},{id:"17",name:"调休"},{id:"18",name:"产检假"},{id:"19",name:"流产假"},{id:"20",name:"长期病假"},{id:"21",name:"测试假"},{id:"22",name:"补签"}],type:[{leaveType:"60000",name:"年假",isEnable:!1},{leaveType:"60100",name:"事假",isEnable:!1},{leaveType:"60200",name:"病假",isEnable:!1},{leaveType:"60300",name:"婚假",isEnable:!1},{leaveType:"60400",name:"丧假",isEnable:!1},{leaveType:"60500",name:"产假",isEnable:!1},{leaveType:"60600",name:"奖励产假",isEnable:!1},{leaveType:"60700",name:"陪产假",isEnable:!1},{leaveType:"60800",name:"探亲假",isEnable:!1},{leaveType:"60900",name:"工伤假",isEnable:!1},{leaveType:"61000",name:"调休假",isEnable:!1},{leaveType:"61100",name:"产检假",isEnable:!1},{leaveType:"61200",name:"流产假",isEnable:!1},{leaveType:"61300",name:"长期病假",isEnable:!1},{leaveType:"61400",name:"测试假",isEnable:!1}],departmentType:[{dedTypeCode:"51000",name:"迟到扣款",isEnable:!1,departmentId:"",periodLowerLimit:"30",periodUpperLimit:"30",timesLowerLimit:"2",timesUpperLimit:"2",dedAmonutLowerLimit:"30",dedAmonutUpperLimit:"0",absenceDays:"0.5",fineSalaryMultiples:"2",absenceTimesUpperLimt:"0"},{dedTypeCode:"52000",name:"早退扣款",isEnable:!1,departmentId:"",periodLowerLimit:"30",periodUpperLimit:"30",timesLowerLimit:"2",timesUpperLimit:"2",dedAmonutLowerLimit:"30",dedAmonutUpperLimit:"0",absenceDays:"0.5",fineSalaryMultiples:"2",absenceTimesUpperLimt:"0"},{dedTypeCode:"53000",name:"旷工扣款",isEnable:!1,departmentId:"",periodLowerLimit:"30",periodUpperLimit:"30",timesLowerLimit:"2",timesUpperLimit:"2",dedAmonutLowerLimit:"30",dedAmonutUpperLimit:"0",absenceDays:"0.5",fineSalaryMultiples:"2",absenceTimesUpperLimt:"0"}],overtimeType:[{departmentId:"",rule:"工作日可申请加班",ruleStartTime:"",ruleEndTime:"",isTimeOff:!1,isEnable:!1},{departmentId:"",rule:"休息日可申请加班",ruleStartTime:"",ruleEndTime:"",isTimeOff:!1,isEnable:!1},{departmentId:"",rule:"法定节假日可申请加班",ruleStartTime:"",ruleEndTime:"",isTimeOff:!1,isEnable:!1}]},departments:[],total:100,attendanceRecord:"",monthOfReport:"",centerDialogVisible:!1,tipsDialogVisible:!1,month:"",yearMonth:"",loading:!1,attendInfo:{month:"",getDate:"",getInfo:"",name:"",counts:"",tobeTaskCount:""},formData:{page:1,pagesize:10,keyword:this.keyword,deptID:[],stateID:""},page:{page:1,pagesize:10,total:0},modifyData:{userId:"",day:"",adtStatu:""}}},created:function(){this.getAttendancesList(),this.getDepartment()},methods:{handleSub:function(){this.tipsDialogVisible=!1,this.$message.success("提醒成功")},handleTip:function(){this.tipsDialogVisible=!0},handleSet:function(){this.$refs.set.dialogFormV()},handleCloseModal:function(){this.$refs.set.dialogFormH()},getDepartment:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(y["c"])();case 2:e.departments=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getAttendancesList:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var a,n,i,o,l,d,u,p;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,c(Object(s["a"])({},e.page));case 3:a=t.sent,n=a.data,i=a.monthOfReport,o=a.tobeTaskCount,e.list=n.rows,e.page.total=n.total,e.attendInfo.counts=n.total,e.attendInfo.month=i,e.attendInfo.tobeTaskCount=o,l=new Date,d=l.getFullYear(),u=i,p=new Date(d,u,0),e.monthOfReport=p.getDate(),e.yearMonth=d+(""+u<10?"0"+u:u),e.month=i,e.loading=!1;case 20:case"end":return t.stop()}}),t)})))()},btnOK:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$message.success("更新成功"),e.centerDialogVisible=!1,e.getAttendancesList();case 3:case"end":return t.stop()}}),t)})))()},pageChange:function(e){this.page.page=e,this.getAttendancesList()},showChangeDialog:function(e,t,a){this.modifyData.userId=e.id,this.modifyData.day=a.day,this.modifyData.departmentId=e.departmentId,this.modifyData.adtStatu=a.adtStatu+"",""!==a.adtStatu&&(this.attendInfo.getDate=parseInt(t+1),this.attendInfo.getInfo=a.adtStatu,this.attendInfo.name=e.name,this.centerDialogVisible=!0)}}},U=$,A=(a("ada6"),Object(x["a"])(U,n,i,!1,null,"6d9b4469",null));t["default"]=A.exports},ada6:function(e,t,a){"use strict";a("03c9")},b0d7:function(e,t,a){},b247:function(e,t,a){"use strict";a("e59e")},e59e:function(e,t,a){},edfd:function(e,t,a){"use strict";a("1f6a")}}]);